/*!
	\file
	\brief Алгоритм CRC-8.
	\authors Близнец Р.А. (r.bliznets@gmail.com)
	\version 1.0.0.0
	\date 10.03.2017
*/

#pragma once

#include <stdint.h>

/// Класс CRC
/*!
 Вычисление и проверка CRC-8 через статические методы.
 Используется полином X^8 + X^2 + X^1 + 1 (0x07).
 */
class CCRC8
{
protected:
	static const uint8_t CRCTable[256]; ///< Предвычисленная таблица значений CRC-8 для ускорения вычислений

public:
	/// Проверить CRC-8 данных.
	/*!
	  Проверяет целостность данных путем вычисления CRC-8 и сравнения с ожидаемым результатом.
	  Используется полином X^8 + X^2 + X^1 + 1 (0x07).
	  Начальное значение CRC: 0xFF.
	  
	  \param[in] data Указатель на массив данных для проверки.
	  \param[in] size Размер данных в байтах.
	  \return true если CRC вычислено правильно (контрольная сумма верна), false если данные повреждены.
	*/
	static bool Check(uint8_t *data, uint16_t size);
	
	/// Вычислить CRC-8 для данных.
	/*!
	  Вычисляет контрольную сумму CRC-8 для массива данных.
	  Используется полином X^8 + X^2 + X^1 + 1 (0x07).
	  Начальное значение CRC: 0xFF.
	  
	  \param[in] data Указатель на массив данных для вычисления CRC.
	  \param[in] size Размер данных в байтах.
	  \param[out] crc Указатель на переменную, куда будет записан результат вычисления CRC.
	*/
	static void Create(uint8_t *data, uint16_t size, uint8_t *crc);
};
